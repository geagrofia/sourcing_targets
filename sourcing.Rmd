---
title: "South Africa - Citrus"
author: "A Farrow"
date: "10/02/2023"
header-includes:
   - \usepackage[default]{sourcesanspro}
   - \usepackage[T1]{fontenc}
mainfont: SourceSansPro
output:
  pdf_document:
    dev: png
fontsize: 12pt
classoption: landscape
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(collapse = TRUE, comment = "#>",  dpi = 300,
  echo = FALSE,
  results = 'hide' ,
  message = FALSE,
  warning = FALSE)
```

# Setup

Near the top of the document, I remove the `_targets_r` directory previously written by non-interactive runs of the report. Otherwise, the pipeline may contain superfluous targets.

```{r}
library(targets)
library(sf)
tar_unscript()
sf_use_s2(FALSE)

```

# Globals

We first define some global options/functions common to all targets. We read functions.R for the target functions.

```{targets example-globals, tar_globals = TRUE}
options(tidyverse.quiet = TRUE)
tar_option_set(
  packages = c(
    "tidyverse",
    "dplyr",
    "rnaturalearth",
    "sf",
    "raster",
    "terra",
    "rasterVis",
    "exactextractr",
    "scales",
    "irm",
    "fuZR",
    "kableExtra",
    "units",
    "magrittr",
    "geodata"
  )
)
source("R/functions.R")

```

# Targets List

## Parameters

Many parameters are defined in the cc_data file. We load this here.

```{targets parameters}
list(
  tar_target(cc_row, 34)
  
)


```

## Global spatial data

```{targets global_spatial_data}
list(
  tar_target(world, ne_countries(
    scale = "medium", returnclass = "sf"
  )),
  
  tar_target(world_plot, world_plot_f(world))
)
``` 

## Static raw data

```{targets raw_data}
list(
  tar_target(cc_data_path,
             "data/cc_data.csv",
             format = "file"),
  tar_target(cc_data,
             read_csv(cc_data_path, col_types = cols())),
  tar_target(cc_data_kable, cc_data_kable_make_f(cc_data)),
  tar_target(ISO, ISO_get_f(cc_data, cc_row)),
  tar_target(crop, crop_get_f(cc_data, cc_row)),
  tar_target(drought, drought_get_f(cc_data, cc_row)),
  tar_target(heat, heat_get_f(cc_data, cc_row)),
  tar_target(flood, flood_get_f(cc_data, cc_row)),
  
  tar_target(drought_threshold_l, drought_threshold_l_get_f(cc_data, cc_row)),
  tar_target(drought_threshold_l_width, drought_threshold_l_width_get_f(cc_data, cc_row)),
  tar_target(drought_threshold_u, drought_threshold_u_get_f(cc_data, cc_row)),
  tar_target(drought_threshold_u_width, drought_threshold_u_width_get_f(cc_data, cc_row)),  
  
  tar_target(heat_threshold_l, heat_threshold_l_get_f(cc_data, cc_row)),
  tar_target(heat_threshold_l_width, heat_threshold_l_width_get_f(cc_data, cc_row)),
  tar_target(heat_threshold_u, heat_threshold_u_get_f(cc_data, cc_row)),
  tar_target(heat_threshold_u_width, heat_threshold_u_width_get_f(cc_data, cc_row)),  
  
  tar_target(flood_threshold_l, flood_threshold_l_get_f(cc_data, cc_row)),
  tar_target(flood_threshold_l_width, flood_threshold_l_width_get_f(cc_data, cc_row)),
  tar_target(flood_threshold_u, flood_threshold_u_get_f(cc_data, cc_row)),
  tar_target(flood_threshold_u_width, flood_threshold_u_width_get_f(cc_data, cc_row)),
  
  tar_target(aggregation_value, aggregation_value_get_f(cc_data, cc_row))
  
  )
```

## Country spatial data

```{targets country_crop_data}

# now split up for debugging


#list(
#  tar_target(v_crop, v_crop_get_f(cc_data, cc_row)),
  
#  tar_target(v_crop_extent, v_crop_extent_f(v_crop)),
#  tar_target(
#    v_crop_plot,
#    v_crop_plot_f(v_crop, v_crop_extent, ISO, crop, world)
#  ),
  
#  tar_target(v_ISO, v_ISO_get_f(ISO)),
#  tar_target(v_ISO1, v_ISO1_get_f(ISO)),
#  tar_target(v_ISO_extent, v_ISO_extent_f(v_ISO)),
#  tar_target(v_ISO_plot, v_ISO_plot_f(v_ISO, ISO)),
  
#  tar_target(r_clim_mask, r_clim_mask_get_f(ISO)),
  
#  tar_target(r_lc_global,  r_lc_global_get_f(r_clim_mask)),
  
#  tar_target(r_lc_file,  r_lc_make_write_f(r_lc_global, r_clim_mask, ISO)),
#  tar_target(r_lc,  r_lc_get_f(r_lc_file, ISO)),
#  tar_target(r_lc_plot, r_lc_plot_f(r_lc, world))
#)

```

```{targets country_crop_data_a}
list(
  tar_target(v_crop, v_crop_get_f(cc_data, cc_row))
  
)

```

```{targets country_crop_data_b}
list(
  tar_target(v_crop_extent, v_crop_extent_f(v_crop))
)

```

```{targets country_crop_data_c}
list(
  tar_target(
    v_crop_plot,
    v_crop_plot_f(v_crop, v_crop_extent, ISO, crop, world))
)

```

```{targets country_crop_data_d}
list(
  tar_target(v_ISO, v_ISO_get_f(ISO))
)

```

```{targets country_crop_data_e}
list(
  tar_target(v_ISO1, v_ISO1_get_f(cc_data, cc_row, ISO))
)

```

```{targets country_crop_data_f}
list(
  tar_target(v_ISO_extent, v_ISO_extent_f(v_ISO))
)

```

```{targets country_crop_data_g}
list(
  tar_target(v_ISO_plot, v_ISO_plot_f(v_ISO, ISO))
)

```

```{targets country_crop_data_h}
list(
  tar_target(r_clim_mask, r_clim_mask_get_f(ISO))
)

```

```{targets country_crop_data_i}
list(
  tar_target(r_lc_global,  r_lc_global_get_f(r_clim_mask, cc_data, cc_row))
)

```

```{targets country_crop_data_j}
list(
  tar_target(r_lc_file,  r_lc_make_write_f(r_lc_global, aggregation_value, r_clim_mask, ISO))
)

```

```{targets country_crop_data_k}
list(
  tar_target(r_lc,  r_lc_get_f(r_lc_file, ISO))
)

```

```{targets country_crop_data_l}
list(
  tar_target(r_lc_plot, r_lc_plot_f(r_lc, world))
)

```

## Spatial data preparation

### Processing

```{targets spatial_data_prep_processing_1ai}
list(
    tar_target(r_ISO_a_file, r_ISO_a_make_write_f(v_ISO, r_lc, ISO)),
    tar_target(r_ISO_a, r_ISO_a_get_f(ISO, r_ISO_a_file))
)
```


```{targets spatial_data_prep_processing_1aii}    
#list(
#    tar_target(r_ISO_b_file, r_ISO_b_make_write_f(r_ISO_a, v_ISO_extent, ISO)),
#    tar_target(r_ISO_b, r_ISO_b_get_f(ISO, r_ISO_b_file))
#)
```

```{targets spatial_data_prep_processing_1aiii}   
list(
    tar_target(r_ISO_file, r_ISO_make_write_f(r_ISO_a, v_ISO_extent, ISO))
)

```

```{targets spatial_data_prep_processing_1aiv}   
list( tar_target(r_ISO, r_ISO_get_f(ISO, r_ISO_file))
)

```


```{targets spatial_data_prep_processing_1bi}
list(
  tar_target(r_lc_ISO_file, r_lc_ISO_make_write_f(r_lc, r_ISO, ISO))
)

```

```{targets spatial_data_prep_processing_1bii}
list(
  tar_target(r_lc_ISO, r_lc_ISO_get_f(ISO, r_lc_ISO_file))
)

```

```{targets spatial_data_prep_processing_2a}

list(
  tar_target(r_crop_file, r_crop_make_write_f(v_crop, r_lc_ISO, ISO, crop))
)
  
```

```{targets spatial_data_prep_processing_2b}

list(
  tar_target(r_crop, r_crop_get_f(r_crop_file, ISO, crop))
)
  
```

```{targets spatial_data_prep_processing_2c}

list(
  tar_target(
    r_crop_ISO_file,
    r_crop_ISO_make_write_f(r_crop, r_ISO, ISO, crop)
  )
)
  
```

```{targets spatial_data_prep_processing_2d}

list(
  tar_target(r_crop_ISO, r_crop_ISO_get_f(r_crop_ISO_file, ISO, crop))
)
  
```

```{targets spatial_data_prep_processing_3a}

list(
  tar_target(r_crop_ISO_lc_file, r_crop_ISO_lc_file_make_write_f(r_lc_ISO, r_crop_ISO, ISO, crop))
)
  
```

```{targets spatial_data_prep_processing_3b}

list(
  tar_target(r_crop_ISO_lc, r_crop_ISO_lc_get_f(r_crop_ISO_lc_file, ISO, crop))
)
  
```

```{targets spatial_data_prep_processing_3c}

list(
  tar_target(r_crop_ISO_lc_rcl_file, r_crop_ISO_lc_rcl_make_write_f(r_crop_ISO_lc, ISO, crop))
)
  
```

```{targets spatial_data_prep_processing_3d}

list(
  tar_target(r_crop_ISO_lc_rcl, r_crop_ISO_lc_rcl_get_f(r_crop_ISO_lc_rcl_file, ISO, crop))
)
  
```

```{targets spatial_data_prep_processing_4ai}

list(
  tar_target(
    r_crop_ISO_lc_rcl_agg_file,
    r_crop_ISO_lc_rcl_agg_make_write_f(r_crop_ISO_lc_rcl, ISO, crop)
  )
)

``` 


```{targets spatial_data_prep_processing_4aii}

list(
  tar_target(
    r_crop_ISO_lc_rcl_agg,
    r_crop_ISO_lc_rcl_agg_get_f(r_crop_ISO_lc_rcl_agg_file, ISO, crop)
  )
)

``` 

  
```{targets spatial_data_prep_processing_4b}
  
list(
  tar_target(
    r_crop_ISO_lc_rcl_agg_values,
    r_crop_ISO_lc_rcl_agg_values_get_f(r_crop_ISO_lc_rcl_agg)
  ),
  tar_target(r_crop_ISO_lc_rcl_agg_values_vec0, c(0))
  ,
  tar_target(r_crop_ISO_lc_rcl_agg_values_vec1, c(1))
  ,
  tar_target(r_crop_ISO_lc_rcl_agg_values_vec2, c(2))
  ,
  tar_target(r_crop_ISO_lc_rcl_agg_values_vec01, c(0, 1))
  ,
  tar_target(r_crop_ISO_lc_rcl_agg_values_vec02, c(0, 2))
  ,
  tar_target(r_crop_ISO_lc_rcl_agg_values_vec12, c(1, 2))
)

```  

```{targets spatial_data_prep_processing_4c}

list(
tar_target(
  v_crop_ISO_lc_rcl_agg_file1,
  v_crop_ISO_lc_rcl_agg1_make_write_f(r_crop_ISO_lc_rcl_agg,  ISO, crop)
)
)

```  


```{targets spatial_data_prep_processing_5a}

list(tar_target(
  v_crop_ISO_lc_rcl_agg,
  v_crop_ISO_lc_rcl_agg_get_f(
    v_crop_ISO_lc_rcl_agg_file1,
    r_crop_ISO_lc_rcl_agg_values,
    r_crop_ISO_lc_rcl_agg_values_vec0,
    r_crop_ISO_lc_rcl_agg_values_vec1,
    r_crop_ISO_lc_rcl_agg_values_vec2,
    r_crop_ISO_lc_rcl_agg_values_vec01,
    r_crop_ISO_lc_rcl_agg_values_vec02,
    r_crop_ISO_lc_rcl_agg_values_vec12,
    ISO,
    crop,
    v_ISO1
  )
))
```

```{targets spatial_data_prep_processing_5b}

list(tar_target(
  v_crop_ISO_lc_rcl_agg_file2,
  v_crop_ISO_lc_rcl_agg2_make_write_f
  (v_crop_ISO_lc_rcl_agg,  ISO, crop)
))

```

### Project the crop/landuse vector and get area stats

```{targets spatial_data_prep_processing_6}

list(
  tar_target(wkt_lam, wkt_lam_make_f(v_ISO_extent)),
  tar_target(crs_lam, crs_lam_make_f(wkt_lam)),
  tar_target(
    v_crop_ISO_lc_rcl_agg_proj_file,
    v_crop_ISO_lc_rcl_agg_proj_file_make_write_f(v_crop_ISO_lc_rcl_agg, crs_lam, ISO, crop)
  ),
  tar_target(
    v_crop_ISO_lc_rcl_agg_proj,
    v_crop_ISO_lc_rcl_agg_proj_get_f(v_crop_ISO_lc_rcl_agg_proj_file, ISO, crop)
  ),
  tar_target(
    dB_crop_ISO_lc_rcl_agg_proj,
    dB_crop_ISO_lc_rcl_agg_proj_make_f(v_crop_ISO_lc_rcl_agg_proj, v_ISO1, ISO, crop)
  ),
  tar_target(
    dB_crop_ISO_lc_rcl_agg_proj_plot,
    dB_crop_ISO_lc_rcl_agg_proj_plot_f(dB_crop_ISO_lc_rcl_agg_proj)
  )
)

```



### Plots

```{targets spatial_data_prep_plots}
list(
  tar_target(
    r_lc_ISO_plot,
    r_lc_ISO_plot_f(r_lc_ISO, world, v_ISO_extent, ISO)
  ),
  tar_target(
    r_crop_ISO_plot,
    r_crop_ISO_plot_f(r_crop_ISO, v_ISO1, ISO, crop)
  ),
  tar_target(
    r_crop_ISO_lc_plot,
    r_crop_ISO_lc_plot_f(r_crop_ISO_lc, v_ISO1, ISO, crop)
  ),
  tar_target(
    r_crop_ISO_lc_rcl_plot,
    r_crop_ISO_lc_rcl_plot_f(r_crop_ISO_lc_rcl, v_ISO1, ISO, crop)
  )
  ,
  tar_target(
    v_crop_ISO_lc_rcl_agg_plot,
    v_crop_ISO_lc_rcl_agg_plot_f
    (v_crop_ISO_lc_rcl_agg, v_ISO1, ISO, crop)
  )
)

```

## Trimmed Climate Mask

```{targets trimmed_climate_mask}
list(
  tar_target(r_clim_mask_trim_file, r_clim_mask_trim_file_make_write_f(v_ISO, r_clim_mask, ISO)),
  tar_target(r_clim_mask_trim, r_clim_mask_trim_get_f(ISO, r_clim_mask_trim_file))  
)

```

## Climate Base Data

### Load original data trim and save

```{targets climate_base_data_trim_1}
list(
  tar_target(r_rainfallc_file, r_rainfallc_make_write_f(ISO, crop, cc_data, cc_row, r_clim_mask_trim)),
  tar_target(r_rainfallf_file, r_rainfallf_make_write_f(ISO, crop, cc_data, cc_row, r_clim_mask_trim)),
  tar_target(r_tempc_file, r_tempc_make_write_f(ISO, crop, cc_data, cc_row, r_clim_mask_trim)),
  tar_target(r_tempf_file, r_tempf_make_write_f(ISO, crop, cc_data, cc_row, r_clim_mask_trim))
)
```

```{targets climate_base_data_trim_2}
list(
  tar_target(r_onsetc_file, r_onsetc_make_write_f(ISO, crop, cc_data, cc_row, r_clim_mask_trim)),
  tar_target(r_onsetf_file, r_onsetf_make_write_f(ISO, crop, cc_data, cc_row, r_clim_mask_trim)),
  tar_target(r_durationc_file, r_durationc_make_write_f(ISO, crop, cc_data, cc_row, r_clim_mask_trim)),
  tar_target(r_durationf_file, r_durationf_make_write_f(ISO, crop, cc_data, cc_row, r_clim_mask_trim))
)
```


```{targets climate_base_data_get_1}
list(
  tar_target(r_rainfallc, r_rainfallc_get_f(ISO, crop, r_rainfallc_file)),
  tar_target(r_rainfallf, r_rainfallf_get_f(ISO, crop, r_rainfallf_file)),
  tar_target(r_tempc, r_tempc_get_f(ISO, crop, r_tempc_file)),
  tar_target(r_tempf, r_tempf_get_f(ISO, crop, r_tempf_file))
)
```

```{targets climate_base_data_get_2}
list(
  tar_target(r_onsetc, r_onsetc_get_f(ISO, crop, r_onsetc_file)),
  tar_target(r_onsetf, r_onsetf_get_f(ISO, crop, r_onsetf_file)),
  tar_target(r_durationc, r_durationc_get_f(ISO, crop, r_durationc_file)),
  tar_target(r_durationf, r_durationf_get_f(ISO, crop, r_durationf_file))
)
```

### Calculate changes and save

```{targets climate_base_data_changes_make}

list(
  tar_target(r_rainfall_change_file, r_rainfall_change_make_write_f(r_rainfallc, r_rainfallf, ISO, crop)),
  tar_target(r_temp_change_file, r_temp_change_make_write_f(r_tempc, r_tempf, ISO, crop)),
  tar_target(r_onset_change_file, r_onset_change_make_write_f(r_onsetc, r_onsetf, ISO, crop)),
  tar_target(r_duration_change_file, r_duration_change_make_write_f(r_durationc, r_durationf, ISO, crop))
)
```

```{targets climate_base_data_changes_get}

list(
  tar_target(r_rainfall_change, r_rainfall_change_get_f(r_rainfall_change_file, ISO, crop)),
  tar_target(r_temp_change, r_temp_change_get_f(r_temp_change_file, ISO, crop)),
  tar_target(r_onset_change, r_onset_change_get_f(r_onset_change_file, ISO, crop)),
  tar_target(r_duration_change, r_duration_change_get_f(r_duration_change_file, ISO, crop))
)

```

### Plot climate base data

```{targets climate_base_data_plot_1}
list(
  tar_target(r_rainfallc_plot, r_rainfallc_plot_f(r_rainfallc,
           v_ISO1,
           v_crop_ISO_lc_rcl_agg,
           v_ISO_extent,
           world,
           ISO,
           crop)),
  tar_target(r_rainfallf_plot, r_rainfallf_plot_f(r_rainfallf,
           v_ISO1,
           v_crop_ISO_lc_rcl_agg,
           v_ISO_extent,
           world,
           ISO,
           crop)),
  tar_target(r_tempc_plot, r_tempc_plot_f(r_tempc,
           v_ISO1,
           v_crop_ISO_lc_rcl_agg,
           v_ISO_extent,
           world,
           ISO,
           crop)),
  tar_target(r_tempf_plot, r_tempf_plot_f(r_tempf,
           v_ISO1,
           v_crop_ISO_lc_rcl_agg,
           v_ISO_extent,
           world,
           ISO,
           crop))
)
```

```{targets climate_base_data_plot_2}
list(
  tar_target(r_onsetc_plot, r_onsetc_plot_f(r_onsetc,
           v_ISO1,
           v_crop_ISO_lc_rcl_agg,
           v_ISO_extent,
           world,
           ISO,
           crop)),
  tar_target(r_onsetf_plot, r_onsetf_plot_f(r_onsetf,
           v_ISO1,
           v_crop_ISO_lc_rcl_agg,
           v_ISO_extent,
           world,
           ISO,
           crop)),
  tar_target(r_durationc_plot, r_durationc_plot_f(r_durationc,
           v_ISO1,
           v_crop_ISO_lc_rcl_agg,
           v_ISO_extent,
           world,
           ISO,
           crop)),
  tar_target(r_durationf_plot, r_durationf_plot_f(r_durationf,
           v_ISO1,
           v_crop_ISO_lc_rcl_agg,
           v_ISO_extent,
           world,
           ISO,
           crop))
)
```


```{targets climate_base_data_plot_3}
list(
  tar_target(r_rainfall_change_plot, r_rainfall_change_plot_f(r_rainfall_change,
           v_ISO1,
           v_crop_ISO_lc_rcl_agg,
           v_ISO_extent,
           world,
           ISO,
           crop)),
  tar_target(r_temp_change_plot, r_temp_change_plot_f(r_temp_change,
           v_ISO1,
           v_crop_ISO_lc_rcl_agg,
           v_ISO_extent,
           world,
           ISO,
           crop)),
    tar_target(r_onset_change_plot, r_onset_change_plot_f(r_onset_change,
           v_ISO1,
           v_crop_ISO_lc_rcl_agg,
           v_ISO_extent,
           world,
           ISO,
           crop)),
  tar_target(r_duration_change_plot, r_duration_change_plot_f(r_duration_change,
           v_ISO1,
           v_crop_ISO_lc_rcl_agg,
           v_ISO_extent,
           world,
           ISO,
           crop))
)
```


## Climate Hazard Indicator Data

### Load original data trim and save

```{targets climate_hazard_data_trim}
list(
  tar_target(r_droughtc_file, r_droughtc_make_write_f(ISO, crop, cc_data, cc_row, r_clim_mask_trim)),
  tar_target(r_droughtf_file, r_droughtf_make_write_f(ISO, crop, cc_data, cc_row, r_clim_mask_trim)),
  tar_target(r_heatc_file, r_heatc_make_write_f(ISO, crop, cc_data, cc_row, r_clim_mask_trim)),
  tar_target(r_heatf_file, r_heatf_make_write_f(ISO, crop, cc_data, cc_row, r_clim_mask_trim)),
  tar_target(r_floodc_file, r_floodc_make_write_f(ISO, crop, cc_data, cc_row, r_clim_mask_trim)),
  tar_target(r_floodf_file, r_floodf_make_write_f(ISO, crop, cc_data, cc_row, r_clim_mask_trim))
)

```

```{targets climate_hazard_data_get}
list(
  tar_target(r_droughtc, r_droughtc_get_f(ISO, crop, r_droughtc_file)),
  tar_target(r_droughtf, r_droughtf_get_f(ISO, crop, r_droughtf_file)),
  tar_target(r_heatc, r_heatc_get_f(ISO, crop, r_heatc_file)),
  tar_target(r_heatf, r_heatf_get_f(ISO, crop, r_heatf_file)),
  tar_target(r_floodc, r_floodc_get_f(ISO, crop, r_floodc_file)),
  tar_target(r_floodf, r_floodf_get_f(ISO, crop, r_floodf_file))
)

```


### Calculate changes and save

```{targets climate_hazard_changes_make}
list(
  tar_target(
    r_drought_change_file,
    r_drought_change_make_write_f(r_droughtc, r_droughtf, ISO, crop)
  ),
  tar_target(
    r_heat_change_file,
    r_heat_change_make_write_f(r_heatc, r_heatf, ISO, crop)
  ),
  tar_target(
    r_flood_change_file,
    r_flood_change_make_write_f(r_floodc, r_floodf, ISO, crop)
  )
)

```

```{targets climate_hazard_changes_get}
list(
    tar_target(
    r_drought_change,
    r_drought_change_get_f(r_drought_change_file, ISO, crop)
  ),
    tar_target(
    r_heat_change,
    r_heat_change_get_f(r_heat_change_file, ISO, crop)
  ),
  tar_target(
    r_flood_change,
    r_flood_change_get_f(r_flood_change_file, ISO, crop)
  )
)

```

### Plot climate indicators

```{targets climate_hazard_data_plot}

list(
  tar_target(
    r_droughtc_plot,
    r_droughtc_plot_f(
      r_droughtc,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      drought
    )
  ),
  tar_target(
    r_droughtf_plot,
    r_droughtf_plot_f(
      r_droughtf,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      drought
    )
  ),
  tar_target(
    r_drought_change_plot,
    r_drought_change_plot_f(
      r_drought_change,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      drought
    )
  ),
  tar_target(
    r_heatc_plot,
    r_heatc_plot_f(
      r_heatc,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      heat
    )
  ),
  tar_target(
    r_heatf_plot,
    r_heatf_plot_f(
      r_heatf,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      heat
    )
  ),
  tar_target(
    r_heat_change_plot,
    r_heat_change_plot_f(
      r_heat_change,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
     heat
    )
  ),
  
  tar_target(
    r_floodc_plot,
    r_floodc_plot_f(
      r_floodc,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_floodf_plot,
    r_floodf_plot_f(
      r_floodf,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_flood_change_plot,
    r_flood_change_plot_f(
      r_flood_change,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  )
)

```

## Zonal Statistics

### Rainfall Calculations

```{targets zonal_stats_rainfall}

list(
  tar_target(
    dB_rainfallc_summary,
    dB_rainfallc_summary_make_f(r_rainfallc, v_crop_ISO_lc_rcl_agg)
  ),
  tar_target(
    dB_rainfallf_summary,
    dB_rainfallf_summary_make_f(r_rainfallf, v_crop_ISO_lc_rcl_agg)
  ),
  tar_target(
    dB_rainfall_change_summary,
    dB_rainfall_change_summary_make_f(r_rainfall_change, v_crop_ISO_lc_rcl_agg)
  )
)

```
### Rainfall Plots

```{targets zonal_stats_rainfall_plots}
list(
  tar_target(
    dB_rainfallc_summary_plot,
    dB_rainfallc_summary_plot_f(
      dB_rainfallc_summary,
      ISO,
      crop
    )
  ),
  tar_target(
    dB_rainfallf_summary_plot,
    dB_rainfallf_summary_plot_f(
      dB_rainfallf_summary,
      ISO,
      crop
    )
  ),
  tar_target(
    dB_rainfall_change_summary_plot,
    dB_rainfall_change_summary_plot_f(
      dB_rainfall_change_summary,
      ISO,
      crop
    )
  )
)

```

### Temperature Calculations

```{targets zonal_stats_temp}

list(
  tar_target(
    dB_tempc_summary,
    dB_tempc_summary_make_f(r_tempc, v_crop_ISO_lc_rcl_agg)
  ),
  tar_target(
    dB_tempf_summary,
    dB_tempf_summary_make_f(r_tempf, v_crop_ISO_lc_rcl_agg)
  ),
  tar_target(
    dB_temp_change_summary,
    dB_temp_change_summary_make_f(r_temp_change, v_crop_ISO_lc_rcl_agg)
  )
)

```

### Temperature Plots

```{targets zonal_stats_temp_plots}
list(
  tar_target(
    dB_tempc_summary_plot,
    dB_tempc_summary_plot_f(
      dB_tempc_summary,
      ISO,
      crop
    )
  ),
  tar_target(
    dB_tempf_summary_plot,
    dB_tempf_summary_plot_f(
      dB_tempf_summary,
      ISO,
      crop
    )
  ),
  tar_target(
    dB_temp_change_summary_plot,
    dB_temp_change_summary_plot_f(
      dB_temp_change_summary,
      ISO,
      crop
    )
  )
)

```

### Season Onset Calculations

```{targets zonal_stats_onset}

list(
  tar_target(
    dB_onsetc_summary,
    dB_onsetc_summary_make_f(r_onsetc, v_crop_ISO_lc_rcl_agg)
  ),
  tar_target(
    dB_onsetf_summary,
    dB_onsetf_summary_make_f(r_onsetf, v_crop_ISO_lc_rcl_agg)
  ),
  tar_target(
    dB_onset_change_summary,
    dB_onset_change_summary_make_f(r_onset_change, v_crop_ISO_lc_rcl_agg)
  )
)

```

### Season Onset Plots

```{targets zonal_stats_onset_plots}
list(
  tar_target(
    dB_onsetc_summary_plot,
    dB_onsetc_summary_plot_f(
      dB_onsetc_summary,
      ISO,
      crop
    )
  ),
  tar_target(
    dB_onsetf_summary_plot,
    dB_onsetf_summary_plot_f(
      dB_onsetf_summary,
      ISO,
      crop
    )
  ),
  tar_target(
    dB_onset_change_summary_plot,
    dB_onset_change_summary_plot_f(
      dB_onset_change_summary,
      ISO,
      crop
    )
  )
)

```

### Season Duration Calculations

```{targets zonal_stats_duration}

list(
  tar_target(
    dB_durationc_summary,
    dB_durationc_summary_make_f(r_durationc, v_crop_ISO_lc_rcl_agg)
  ),
  tar_target(
    dB_durationf_summary,
    dB_durationf_summary_make_f(r_durationf, v_crop_ISO_lc_rcl_agg)
  ),
  tar_target(
    dB_duration_change_summary,
    dB_duration_change_summary_make_f(r_duration_change, v_crop_ISO_lc_rcl_agg)
  )
)

```

### Season Duration Plots

```{targets zonal_stats_duration_plots}
list(
  tar_target(
    dB_durationc_summary_plot,
    dB_durationc_summary_plot_f(
      dB_durationc_summary,
      ISO,
      crop
    )
  ),
  tar_target(
    dB_durationf_summary_plot,
    dB_durationf_summary_plot_f(
      dB_durationf_summary,
      ISO,
      crop
    )
  ),
  tar_target(
    dB_duration_change_summary_plot,
    dB_duration_change_summary_plot_f(
      dB_duration_change_summary,
      ISO,
      crop
    )
  )
)

```

### Drought Calculations

```{targets zonal_stats_drought}

list(
  tar_target(
    dB_droughtc_summary,
    dB_droughtc_summary_make_f(r_droughtc, v_crop_ISO_lc_rcl_agg)
  ),
  tar_target(
    dB_droughtf_summary,
    dB_droughtf_summary_make_f(r_droughtf, v_crop_ISO_lc_rcl_agg)
  ),
  tar_target(
    dB_drought_change_summary,
    dB_drought_change_summary_make_f(r_drought_change, v_crop_ISO_lc_rcl_agg)
  )
)

```

### Drought Plots

```{targets zonal_stats_drought_plots}
list(
  tar_target(
    dB_droughtc_summary_plot,
    dB_droughtc_summary_plot_f(
      dB_droughtc_summary,
      drought_threshold_l,
      drought_threshold_u,
      drought,
      ISO,
      crop
    )
  ),
  tar_target(
    dB_droughtf_summary_plot,
    dB_droughtf_summary_plot_f(
      dB_droughtf_summary,
      drought_threshold_l,
      drought_threshold_u,
      drought,
      ISO,
      crop
    )
  ),
  tar_target(
    dB_drought_change_summary_plot,
    dB_drought_change_summary_plot_f(
      dB_drought_change_summary,
      drought_threshold_l,
      drought_threshold_u,
      drought,
      ISO,
      crop
    )
  )
)

```

### Heat Stress Calculations

```{targets zonal_stats_heat}

list(
  tar_target(
    dB_heatc_summary,
    dB_heatc_summary_make_f(r_heatc, v_crop_ISO_lc_rcl_agg)
  ),
  tar_target(
    dB_heatf_summary,
    dB_heatf_summary_make_f(r_heatf, v_crop_ISO_lc_rcl_agg)
  ),
  tar_target(
    dB_heat_change_summary,
    dB_heat_change_summary_make_f(r_heat_change, v_crop_ISO_lc_rcl_agg)
  )
)

```

### Heat Stress Plots

```{targets zonal_stats_heat_plots}
list(
  tar_target(
    dB_heatc_summary_plot,
    dB_heatc_summary_plot_f(
      dB_heatc_summary,
      heat_threshold_l,
      heat_threshold_u,
      heat,
      ISO,
      crop
    )
  ),
  tar_target(
    dB_heatf_summary_plot,
    dB_heatf_summary_plot_f(
      dB_heatf_summary,
      heat_threshold_l,
      heat_threshold_u,
      heat,
      ISO,
      crop
    )
  ),
  tar_target(
    dB_heat_change_summary_plot,
    dB_heat_change_summary_plot_f(
      dB_heat_change_summary,
      heat_threshold_l,
      heat_threshold_u,
      heat,
      ISO,
      crop
    )
  )
)

```

### Waterlogging Calculations

```{targets zonal_stats_flood}

list(
  tar_target(
    dB_floodc_summary,
    dB_floodc_summary_make_f(r_floodc, v_crop_ISO_lc_rcl_agg)
  ),
  tar_target(
    dB_floodf_summary,
    dB_floodf_summary_make_f(r_floodf, v_crop_ISO_lc_rcl_agg)
  ),
  tar_target(
    dB_flood_change_summary,
    dB_flood_change_summary_make_f(r_flood_change, v_crop_ISO_lc_rcl_agg)
  )
)

```

### Waterlogging Plots

```{targets zonal_stats_flood_plots}
list(
  tar_target(
    dB_floodc_summary_plot,
    dB_floodc_summary_plot_f(
      dB_floodc_summary,
      flood_threshold_l,
      flood_threshold_u,
      flood,
      ISO,
      crop
    )
  ),
  tar_target(
    dB_floodf_summary_plot,
    dB_floodf_summary_plot_f(
      dB_floodf_summary,
      flood_threshold_l,
      flood_threshold_u,
      flood,
      ISO,
      crop
    )
  ),
  tar_target(
    dB_flood_change_summary_plot,
    dB_flood_change_summary_plot_f(
      dB_flood_change_summary,
      flood_threshold_l,
      flood_threshold_u,
      flood,
      ISO,
      crop
    )
  )
)

```

## Climate Hazard Impacts

### Prepare Impact Data

```{targets impact_data_prep}

list(
  tar_target(dB_impact_prelim,
             dB_impact_prelim_make_f(r_droughtc)),
  tar_target(xy_impact,
             xy_impact_make_f(dB_impact_prelim)),
  
  tar_target(newcol_droughtc,
    newcol_droughtc_make_f(xy_impact, r_droughtc)),
  tar_target(newcol_droughtf,
    newcol_droughtf_make_f(xy_impact, r_droughtf)),
  
  tar_target(newcol_heatc,
             newcol_heatc_make_f(xy_impact, r_heatc)),
  tar_target(newcol_heatf,
             newcol_heatf_make_f(xy_impact, r_heatf)),
  
  tar_target(newcol_floodc,
             newcol_floodc_make_f(xy_impact, r_floodc)),
  tar_target(newcol_floodf,
             newcol_floodf_make_f(xy_impact, r_floodf)),
  
  tar_target(
    dB_impact,
    dB_impact_make_f(
      dB_impact_prelim,
      newcol_droughtc,
      newcol_droughtf,
      newcol_heatc,
      newcol_heatf,
      newcol_floodc,
      newcol_floodf
    )
  )
)

```

### Fuzzy Partition Construction

```{targets fuzzy_partitions_make}
list(
  tar_target(
    fp_drought_l,
    fp_drought_l_make_f(drought_threshold_l, drought_threshold_l_width)
  ),
  tar_target(
    fp_drought_u,
    fp_drought_u_make_f(drought_threshold_u, drought_threshold_u_width)
  ),
  tar_target(
    fp_heat_l,
    fp_heat_l_make_f(heat_threshold_l, heat_threshold_l_width)
  ),
  tar_target(
    fp_heat_u,
    fp_heat_u_make_f(heat_threshold_u, heat_threshold_u_width)
  ),
  tar_target(
    fp_flood_l,
    fp_flood_l_make_f(flood_threshold_l, flood_threshold_l_width)
  ),
  tar_target(
    fp_flood_u,
    fp_flood_u_make_f(flood_threshold_u, flood_threshold_u_width)
  )
)

```


### Fuzzy Partition Plots

```{targets fuzzy_partitions_plot}

list(
  tar_target(
    fp_drought_l_plot,
    fp_drought_l_plot_f(fp_drought_l, drought)
  ),
  tar_target(
    fp_drought_u_plot,
    fp_drought_u_plot_f(fp_drought_u, drought)
  ),
  tar_target(fp_heat_l_plot,
             fp_heat_l_plot_f(fp_heat_l, heat)),
  tar_target(fp_heat_u_plot,
             fp_heat_u_plot_f(fp_heat_u, heat)),
  tar_target(fp_flood_l_plot,
             fp_flood_l_plot_f(fp_flood_l, flood)),
  tar_target(fp_flood_u_plot,
             fp_flood_u_plot_f(fp_flood_u, flood))
)

```

### Single Hazard Rule Base Construction

```{targets single_hazard_rule_base_make}

list(
  tar_target(rb_droughtc, rb_droughtc_make_f(drought)),
  tar_target(rb_heatc, rb_heatc_make_f(heat)),
  tar_target(rb_floodc, rb_floodc_make_f(flood)),
  tar_target(rb_droughtf, rb_droughtf_make_f(drought)),
  tar_target(rb_heatf, rb_heatf_make_f(heat)),
  tar_target(rb_floodf, rb_floodf_make_f(flood))
)

```


### Single Hazard Fuzzy Partition Matrix Prediction

#### Lower Threshold

```{targets single_hazard_fpm_l_predict}

list(
  tar_target(
    fpm_droughtc_l,
    fpm_droughtc_l_make_f(rb_droughtc, dB_impact, fp_drought_l)
  ),
  tar_target(fpm_heatc_l, fpm_heatc_l_make_f(rb_heatc, dB_impact, fp_heat_l)),
  tar_target(fpm_floodc_l, fpm_floodc_l_make_f(rb_floodc, dB_impact, fp_flood_l)),
  tar_target(
    fpm_droughtf_l,
    fpm_droughtf_l_make_f(rb_droughtf, dB_impact, fp_drought_l)
  ),
  tar_target(fpm_heatf_l, fpm_heatf_l_make_f(rb_heatf, dB_impact, fp_heat_l)),
  tar_target(fpm_floodf_l, fpm_floodf_l_make_f(rb_floodf, dB_impact, fp_flood_l))
)

```

#### Upper Threshold

```{targets single_hazard_fpm_u_predict}

list(
  tar_target(
    fpm_droughtc_u,
    fpm_droughtc_u_make_f(rb_droughtc, dB_impact, fp_drought_u)
  ),
  tar_target(fpm_heatc_u, fpm_heatc_u_make_f(rb_heatc, dB_impact, fp_heat_u)),
  tar_target(fpm_floodc_u, fpm_floodc_u_make_f(rb_floodc, dB_impact, fp_flood_u)),
  tar_target(
    fpm_droughtf_u,
    fpm_droughtf_u_make_f(rb_droughtf, dB_impact, fp_drought_u)
  ),
  tar_target(fpm_heatf_u, fpm_heatf_u_make_f(rb_heatf, dB_impact, fp_heat_u)),
  tar_target(fpm_floodf_u, fpm_floodf_u_make_f(rb_floodf, dB_impact, fp_flood_u))
)

```


### Multiple Hazard Rule Base Construction

```{targets multiple_hazard_rule_base_make}

list(
  tar_target(rb_droughtc_heatc, rb_droughtc_heatc_make_f(drought, heat)),
  tar_target(
    rb_droughtc_floodc,
    rb_droughtc_floodc_make_f(drought, flood)
  ),
  tar_target(rb_heatc_floodc, rb_heatc_floodc_make_f(heat, flood)),
  tar_target(
    rb_droughtc_heatc_floodc,
    rb_droughtc_heatc_floodc_make_f(drought, heat, flood)
  ),
  tar_target(rb_droughtf_heatf, rb_droughtf_heatf_make_f(drought, heat)),
  tar_target(
    rb_droughtf_floodf,
    rb_droughtf_floodf_make_f(drought, flood)
  ),
  tar_target(rb_heatf_floodf, rb_heatf_floodf_make_f(heat, flood)),
  tar_target(
    rb_droughtf_heatf_floodf,
    rb_droughtf_heatf_floodf_make_f(drought, heat, flood)
  )
)

```


### Multiple Hazard Fuzzy Partition Matrix Prediction

#### Lower Threshold

```{targets multiple_hazard_fpm_l_predict}

list(
  tar_target(
    fpm_droughtc_l_heatc_l,
    fpm_droughtc_l_heatc_l_make_f(rb_droughtc_heatc, dB_impact, fp_drought_l, fp_heat_l)
  ),
  tar_target(
    fpm_droughtc_l_floodc_l,
    fpm_droughtc_l_floodc_l_make_f(rb_droughtc_floodc, dB_impact, fp_drought_l, fp_flood_l)
  ),
  tar_target(
    fpm_heatc_l_floodc_l,
    fpm_heatc_l_floodc_l_make_f(rb_heatc_floodc, dB_impact, fp_heat_l, fp_flood_l)
  ),
  tar_target(
    fpm_droughtc_l_heatc_l_floodc_l,
    fpm_droughtc_l_heatc_l_floodc_l_make_f(
      rb_droughtc_heatc_floodc,
      dB_impact,
      fp_drought_l,
      fp_heat_l,
      fp_flood_l
    )
  ),
  tar_target(
    fpm_droughtf_l_heatf_l,
    fpm_droughtf_l_heatf_l_make_f(rb_droughtf_heatf, dB_impact, fp_drought_l, fp_heat_l)
  ),
  tar_target(
    fpm_droughtf_l_floodf_l,
    fpm_droughtf_l_floodf_l_make_f(rb_droughtf_floodf, dB_impact, fp_drought_l, fp_flood_l)
  ),
  tar_target(
    fpm_heatf_l_floodf_l,
    fpm_heatf_l_floodf_l_make_f(rb_heatf_floodf, dB_impact, fp_heat_l, fp_flood_l)
  ),
  tar_target(
    fpm_droughtf_l_heatf_l_floodf_l,
    fpm_droughtf_l_heatf_l_floodf_l_make_f(
      rb_droughtf_heatf_floodf,
      dB_impact,
      fp_drought_l,
      fp_heat_l,
      fp_flood_l
    )
  )
)

```

#### Upper Threshold

```{targets multiple_hazard_fpm_u_predict}

list(
  tar_target(
    fpm_droughtc_u_heatc_u,
    fpm_droughtc_u_heatc_u_make_f(rb_droughtc_heatc, dB_impact, fp_drought_u, fp_heat_u)
  ),
  tar_target(
    fpm_droughtc_u_floodc_u,
    fpm_droughtc_u_floodc_u_make_f(rb_droughtc_floodc, dB_impact, fp_drought_u, fp_flood_u)
  ),
  tar_target(
    fpm_heatc_u_floodc_u,
    fpm_heatc_u_floodc_u_make_f(rb_heatc_floodc, dB_impact, fp_heat_u, fp_flood_u)
  ),
  tar_target(
    fpm_droughtc_u_heatc_u_floodc_u,
    fpm_droughtc_u_heatc_u_floodc_u_make_f(
      rb_droughtc_heatc_floodc,
      dB_impact,
      fp_drought_u,
      fp_heat_u,
      fp_flood_u
    )
  ),
  tar_target(
    fpm_droughtf_u_heatf_u,
    fpm_droughtf_u_heatf_u_make_f(rb_droughtf_heatf, dB_impact, fp_drought_u, fp_heat_u)
  ),
  tar_target(
    fpm_droughtf_u_floodf_u,
    fpm_droughtf_u_floodf_u_make_f(rb_droughtf_floodf, dB_impact, fp_drought_u, fp_flood_u)
  ),
  tar_target(
    fpm_heatf_u_floodf_u,
    fpm_heatf_u_floodf_u_make_f(rb_heatf_floodf, dB_impact, fp_heat_u, fp_flood_u)
  ),
  tar_target(
    fpm_droughtf_u_heatf_u_floodf_u,
    fpm_droughtf_u_heatf_u_floodf_u_make_f(
      rb_droughtf_heatf_floodf,
      dB_impact,
      fp_drought_u,
      fp_heat_u,
      fp_flood_u
    )
  )
)

```

#### Mixed Thresholds

```{targets multiple_hazard_fpm_mixed_predict_c}

list(
  tar_target(
    fpm_droughtc_l_heatc_u  ,
    fpm_droughtc_l_heatc_u_make_f(rb_droughtc_heatc, dB_impact, fp_drought_l, fp_heat_u)
  ),
  tar_target(
    fpm_droughtc_u_heatc_l  ,
    fpm_droughtc_u_heatc_l_make_f(rb_droughtc_heatc, dB_impact, fp_drought_u, fp_heat_l)
  ),
  
  tar_target(
    fpm_droughtc_l_floodc_u  ,
    fpm_droughtc_l_floodc_u_make_f(rb_droughtc_floodc, dB_impact, fp_drought_l, fp_flood_u)
  ),
  tar_target(
    fpm_droughtc_u_floodc_l  ,
    fpm_droughtc_u_floodc_l_make_f(rb_droughtc_floodc, dB_impact, fp_drought_u, fp_flood_l)
  ),
  
  tar_target(
    fpm_heatc_l_floodc_u  ,
    fpm_heatc_l_floodc_u_make_f(rb_heatc_floodc, dB_impact, fp_heat_l, fp_flood_u)
  ),
  tar_target(
    fpm_heatc_u_floodc_l  ,
    fpm_heatc_u_floodc_l_make_f(rb_heatc_floodc, dB_impact, fp_heat_u, fp_flood_l)
  ),
  
  tar_target(
    fpm_droughtc_l_heatc_l_floodc_u  ,
    fpm_droughtc_l_heatc_l_floodc_u_make_f(
      rb_droughtc_heatc_floodc,
      dB_impact,
      fp_drought_l,
      fp_heat_l,
      fp_flood_u
    )
  ),
  tar_target(
    fpm_droughtc_l_heatc_u_floodc_l  ,
    fpm_droughtc_l_heatc_u_floodc_l_make_f(
      rb_droughtc_heatc_floodc,
      dB_impact,
      fp_drought_l,
      fp_heat_u,
      fp_flood_l
    )
  ),
  tar_target(
    fpm_droughtc_u_heatc_l_floodc_u  ,
    fpm_droughtc_u_heatc_l_floodc_u_make_f(
      rb_droughtc_heatc_floodc,
      dB_impact,
      fp_drought_u,
      fp_heat_l,
      fp_flood_u
    )
  ),
  tar_target(
    fpm_droughtc_u_heatc_l_floodc_l  ,
    fpm_droughtc_u_heatc_l_floodc_l_make_f(
      rb_droughtc_heatc_floodc,
      dB_impact,
      fp_drought_u,
      fp_heat_l,
      fp_flood_l
    )
  ),
  tar_target(
    fpm_droughtc_u_heatc_u_floodc_l  ,
    fpm_droughtc_u_heatc_u_floodc_l_make_f(
      rb_droughtc_heatc_floodc,
      dB_impact,
      fp_drought_u,
      fp_heat_u,
      fp_flood_l
    )
  ),
  tar_target(
    fpm_droughtc_l_heatc_u_floodc_u  ,
    fpm_droughtc_l_heatc_u_floodc_u_make_f(
      rb_droughtc_heatc_floodc,
      dB_impact,
      fp_drought_l,
      fp_heat_u,
      fp_flood_u
    )
  )
)

```

```{targets multiple_hazard_fpm_mixed_predict_f}

list(
  tar_target(
    fpm_droughtf_l_heatf_u  ,
    fpm_droughtf_l_heatf_u_make_f(rb_droughtf_heatf, dB_impact, fp_drought_l, fp_heat_u)
  ),
  tar_target(
    fpm_droughtf_u_heatf_l  ,
    fpm_droughtf_u_heatf_l_make_f(rb_droughtf_heatf, dB_impact, fp_drought_u, fp_heat_l)
  ),
  
  tar_target(
    fpm_droughtf_l_floodf_u  ,
    fpm_droughtf_l_floodf_u_make_f(rb_droughtf_floodf, dB_impact, fp_drought_l, fp_flood_u)
  ),
  tar_target(
    fpm_droughtf_u_floodf_l  ,
    fpm_droughtf_u_floodf_l_make_f(rb_droughtf_floodf, dB_impact, fp_drought_u, fp_flood_l)
  ),
  
  tar_target(
    fpm_heatf_l_floodf_u  ,
    fpm_heatf_l_floodf_u_make_f(rb_heatf_floodf, dB_impact, fp_heat_l, fp_flood_u)
  ),
  tar_target(
    fpm_heatf_u_floodf_l  ,
    fpm_heatf_u_floodf_l_make_f(rb_heatf_floodf, dB_impact, fp_heat_u, fp_flood_l)
  ),
  
  tar_target(
    fpm_droughtf_l_heatf_l_floodf_u  ,
    fpm_droughtf_l_heatf_l_floodf_u_make_f(
      rb_droughtf_heatf_floodf,
      dB_impact,
      fp_drought_l,
      fp_heat_l,
      fp_flood_u
    )
  ),
  tar_target(
    fpm_droughtf_l_heatf_u_floodf_l  ,
    fpm_droughtf_l_heatf_u_floodf_l_make_f(
      rb_droughtf_heatf_floodf,
      dB_impact,
      fp_drought_l,
      fp_heat_u,
      fp_flood_l
    )
  ),
  tar_target(
    fpm_droughtf_u_heatf_l_floodf_u  ,
    fpm_droughtf_u_heatf_l_floodf_u_make_f(
      rb_droughtf_heatf_floodf,
      dB_impact,
      fp_drought_u,
      fp_heat_l,
      fp_flood_u
    )
  ),
  tar_target(
    fpm_droughtf_u_heatf_l_floodf_l  ,
    fpm_droughtf_u_heatf_l_floodf_l_make_f(
      rb_droughtf_heatf_floodf,
      dB_impact,
      fp_drought_u,
      fp_heat_l,
      fp_flood_l
    )
  ),
  tar_target(
    fpm_droughtf_u_heatf_u_floodf_l  ,
    fpm_droughtf_u_heatf_u_floodf_l_make_f(
      rb_droughtf_heatf_floodf,
      dB_impact,
      fp_drought_u,
      fp_heat_u,
      fp_flood_l
    )
  ),
  tar_target(
    fpm_droughtf_l_heatf_u_floodf_u  ,
    fpm_droughtf_l_heatf_u_floodf_u_make_f(
      rb_droughtf_heatf_floodf,
      dB_impact,
      fp_drought_l,
      fp_heat_u,
      fp_flood_u
    )
  )
)

```

### Finalise Impact Data

```{targets impact_data_finalisation}

list(
  tar_target(dB_impact_full,  dB_impact_full_make_f(dB_impact,
      fpm_droughtc_l,
      fpm_heatc_l,
      fpm_floodc_l,
      fpm_droughtf_l,
      fpm_heatf_l,
      fpm_floodf_l,
      fpm_droughtc_l_heatc_l,
      fpm_droughtc_l_floodc_l,
      fpm_heatc_l_floodc_l,
      fpm_droughtc_l_heatc_l_floodc_l,
      fpm_droughtf_l_heatf_l,
      fpm_droughtf_l_floodf_l,
      fpm_heatf_l_floodf_l,
      fpm_droughtf_l_heatf_l_floodf_l,
      fpm_droughtc_u,
      fpm_heatc_u,
      fpm_floodc_u,
      fpm_droughtf_u,
      fpm_heatf_u,
      fpm_floodf_u,
      fpm_droughtc_u_heatc_u,
      fpm_droughtc_u_floodc_u,
      fpm_heatc_u_floodc_u,
      fpm_droughtc_u_heatc_u_floodc_u,
      fpm_droughtf_u_heatf_u,
      fpm_droughtf_u_floodf_u,
      fpm_heatf_u_floodf_u,
      fpm_droughtf_u_heatf_u_floodf_u,
      fpm_droughtc_l_heatc_u,
      fpm_droughtc_u_heatc_l,
      fpm_droughtc_l_floodc_u,
      fpm_droughtc_u_floodc_l,
      fpm_heatc_l_floodc_u,
      fpm_heatc_u_floodc_l,
      fpm_droughtc_l_heatc_l_floodc_u,
      fpm_droughtc_l_heatc_u_floodc_l,
      fpm_droughtc_u_heatc_l_floodc_u,
      fpm_droughtc_u_heatc_l_floodc_l,
      fpm_droughtc_u_heatc_u_floodc_l,
      fpm_droughtc_l_heatc_u_floodc_u,
      fpm_droughtf_l_heatf_u,
      fpm_droughtf_u_heatf_l,
      fpm_droughtf_l_floodf_u,
      fpm_droughtf_u_floodf_l,
      fpm_heatf_l_floodf_u,
      fpm_heatf_u_floodf_l,
      fpm_droughtf_l_heatf_l_floodf_u,
      fpm_droughtf_l_heatf_u_floodf_l,
      fpm_droughtf_u_heatf_l_floodf_u,
      fpm_droughtf_u_heatf_l_floodf_l,
      fpm_droughtf_u_heatf_u_floodf_l,
      fpm_droughtf_l_heatf_u_floodf_u))
     )
```

### Spatialise Impact Data

```{targets impact_data_spatialisation_1}

list(
  tar_target(v_impact, v_impact_make_f(dB_impact_full)),
  tar_target(
    rB_impact_prelim,
    rB_impact_prelim_make_f(v_impact, r_droughtc)
  ),
  tar_target(
    rB_impact,
    rB_impact_make_f(v_impact, r_droughtc, rB_impact_prelim)
  )
)

```    
 
```{targets impact_data_spatialisation_2}

list(tar_target(rB_impact_file,
                rB_impact_file_make_f(rB_impact, ISO, crop)))

```

### Reload Spatial Impact Data

#### Past Lower threshold

```{targets impact_data_reload_1}

list(
    tar_target(
    r_droughtc_l_heatc_l_max,
    r_droughtc_l_heatc_l_max_get_f(rB_impact_file, ISO, crop)
  ),
    tar_target(
    r_droughtc_l_floodc_l_max,
    r_droughtc_l_floodc_l_max_get_f(rB_impact_file, ISO, crop)
  ),
  tar_target(
    r_heatc_l_floodc_l_max,
    r_heatc_l_floodc_l_max_get_f(rB_impact_file, ISO, crop)
  ),
  tar_target(
    r_droughtc_l_heatc_l_floodc_l_max,
    r_droughtc_l_heatc_l_floodc_l_max_get_f(rB_impact_file, ISO, crop)
  )  
)

```

#### Past Upper threshold

```{targets impact_data_reload_2}

list(
    tar_target(
    r_droughtc_u_heatc_u_max,
    r_droughtc_u_heatc_u_max_get_f(rB_impact_file, ISO, crop)
  ),
    tar_target(
    r_droughtc_u_floodc_u_max,
    r_droughtc_u_floodc_u_max_get_f(rB_impact_file, ISO, crop)
  ),
  tar_target(
    r_heatc_u_floodc_u_max,
    r_heatc_u_floodc_u_max_get_f(rB_impact_file, ISO, crop)
  ),
  tar_target(
    r_droughtc_u_heatc_u_floodc_u_max,
    r_droughtc_u_heatc_u_floodc_u_max_get_f(rB_impact_file, ISO, crop)
  )  
)

```
#### Past Mixed threshold

```{targets impact_data_reload_3}

list(
  tar_target(
    r_droughtc_l_heatc_u_max,
    r_droughtc_l_heatc_u_max_get_f(rB_impact_file, ISO, crop)
  ),
  tar_target(
    r_droughtc_u_heatc_l_max,
    r_droughtc_u_heatc_l_max_get_f(rB_impact_file, ISO, crop)
  ),
  tar_target(
    r_droughtc_l_floodc_u_max,
    r_droughtc_l_floodc_u_max_get_f(rB_impact_file, ISO, crop)
  ),
  tar_target(
    r_droughtc_u_floodc_l_max,
    r_droughtc_u_floodc_l_max_get_f(rB_impact_file, ISO, crop)
  ),
  tar_target(
    r_heatc_l_floodc_u_max,
    r_heatc_l_floodc_u_max_get_f(rB_impact_file, ISO, crop)
  ),
  tar_target(
    r_heatc_u_floodc_l_max,
    r_heatc_u_floodc_l_max_get_f(rB_impact_file, ISO, crop)
  ),
  tar_target(
    r_droughtc_l_heatc_l_floodc_u_max,
    r_droughtc_l_heatc_l_floodc_u_max_get_f(rB_impact_file, ISO, crop)
  ),
  tar_target(
    r_droughtc_l_heatc_u_floodc_l_max,
    r_droughtc_l_heatc_u_floodc_l_max_get_f(rB_impact_file, ISO, crop)
  ),
  tar_target(
    r_droughtc_u_heatc_l_floodc_l_max,
    r_droughtc_u_heatc_l_floodc_l_max_get_f(rB_impact_file, ISO, crop)
  ),
  tar_target(
    r_droughtc_l_heatc_u_floodc_u_max,
    r_droughtc_l_heatc_u_floodc_u_max_get_f(rB_impact_file, ISO, crop)
  ),
  tar_target(
    r_droughtc_u_heatc_l_floodc_u_max,
    r_droughtc_u_heatc_l_floodc_u_max_get_f(rB_impact_file, ISO, crop)
  ),
  tar_target(
    r_droughtc_u_heatc_u_floodc_l_max,
    r_droughtc_u_heatc_u_floodc_l_max_get_f(rB_impact_file, ISO, crop)
  )
)
```

#### Future Lower threshold

```{targets impact_data_reload_4}

list(
    tar_target(
    r_droughtf_l_heatf_l_max,
    r_droughtf_l_heatf_l_max_get_f(rB_impact_file, ISO, crop)
  ),
    tar_target(
    r_droughtf_l_floodf_l_max,
    r_droughtf_l_floodf_l_max_get_f(rB_impact_file, ISO, crop)
  ),
  tar_target(
    r_heatf_l_floodf_l_max,
    r_heatf_l_floodf_l_max_get_f(rB_impact_file, ISO, crop)
  ),
  tar_target(
    r_droughtf_l_heatf_l_floodf_l_max,
    r_droughtf_l_heatf_l_floodf_l_max_get_f(rB_impact_file, ISO, crop)
  )  
)

```

#### Future Upper threshold

```{targets impact_data_reload_5}

list(
    tar_target(
    r_droughtf_u_heatf_u_max,
    r_droughtf_u_heatf_u_max_get_f(rB_impact_file, ISO, crop)
  ),
    tar_target(
    r_droughtf_u_floodf_u_max,
    r_droughtf_u_floodf_u_max_get_f(rB_impact_file, ISO, crop)
  ),
  tar_target(
    r_heatf_u_floodf_u_max,
    r_heatf_u_floodf_u_max_get_f(rB_impact_file, ISO, crop)
  ),
  tar_target(
    r_droughtf_u_heatf_u_floodf_u_max,
    r_droughtf_u_heatf_u_floodf_u_max_get_f(rB_impact_file, ISO, crop)
  )  
)

```
#### Future Mixed threshold

```{targets impact_data_reload_6}

list(
  tar_target(
    r_droughtf_l_heatf_u_max,
    r_droughtf_l_heatf_u_max_get_f(rB_impact_file, ISO, crop)
  ),
  tar_target(
    r_droughtf_u_heatf_l_max,
    r_droughtf_u_heatf_l_max_get_f(rB_impact_file, ISO, crop)
  ),
  tar_target(
    r_droughtf_l_floodf_u_max,
    r_droughtf_l_floodf_u_max_get_f(rB_impact_file, ISO, crop)
  ),
  tar_target(
    r_droughtf_u_floodf_l_max,
    r_droughtf_u_floodf_l_max_get_f(rB_impact_file, ISO, crop)
  ),
  tar_target(
    r_heatf_l_floodf_u_max,
    r_heatf_l_floodf_u_max_get_f(rB_impact_file, ISO, crop)
  ),
  tar_target(
    r_heatf_u_floodf_l_max,
    r_heatf_u_floodf_l_max_get_f(rB_impact_file, ISO, crop)
  ),
  tar_target(
    r_droughtf_l_heatf_l_floodf_u_max,
    r_droughtf_l_heatf_l_floodf_u_max_get_f(rB_impact_file, ISO, crop)
  ),
  tar_target(
    r_droughtf_l_heatf_u_floodf_l_max,
    r_droughtf_l_heatf_u_floodf_l_max_get_f(rB_impact_file, ISO, crop)
  ),
  tar_target(
    r_droughtf_u_heatf_l_floodf_l_max,
    r_droughtf_u_heatf_l_floodf_l_max_get_f(rB_impact_file, ISO, crop)
  ),
  tar_target(
    r_droughtf_l_heatf_u_floodf_u_max,
    r_droughtf_l_heatf_u_floodf_u_max_get_f(rB_impact_file, ISO, crop)
  ),
  tar_target(
    r_droughtf_u_heatf_l_floodf_u_max,
    r_droughtf_u_heatf_l_floodf_u_max_get_f(rB_impact_file, ISO, crop)
  ),
  tar_target(
    r_droughtf_u_heatf_u_floodf_l_max,
    r_droughtf_u_heatf_u_floodf_l_max_get_f(rB_impact_file, ISO, crop)
  )
)
```

### Plot Spatial Impact Data

#### Past Lower threshold

```{targets impact_data_plot_1}

list(
  tar_target(
    r_droughtc_l_heatc_l_max_plot,
    r_droughtc_l_heatc_l_max_plot_f(
      r_droughtc_l_heatc_l_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_droughtc_l_floodc_l_max_plot,
    r_droughtc_l_floodc_l_max_plot_f(
      r_droughtc_l_floodc_l_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_heatc_l_floodc_l_max_plot,
    r_heatc_l_floodc_l_max_plot_f(
      r_heatc_l_floodc_l_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_droughtc_l_heatc_l_floodc_l_max_plot,
    r_droughtc_l_heatc_l_floodc_l_max_plot_f(
      r_droughtc_l_heatc_l_floodc_l_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  )
)

```

#### Past Upper threshold

```{targets impact_data_plot_2}

list(
  tar_target(
    r_droughtc_u_heatc_u_max_plot,
    r_droughtc_u_heatc_u_max_plot_f(
      r_droughtc_u_heatc_u_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_droughtc_u_floodc_u_max_plot,
    r_droughtc_u_floodc_u_max_plot_f(
      r_droughtc_u_floodc_u_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_heatc_u_floodc_u_max_plot,
    r_heatc_u_floodc_u_max_plot_f(
       r_heatc_u_floodc_u_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_droughtc_u_heatc_u_floodc_u_max_plot,
    r_droughtc_u_heatc_u_floodc_u_max_plot_f(
      r_droughtc_u_heatc_u_floodc_u_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  )
)

```
#### Past Mixed threshold

```{targets impact_data_plot_3}

list(
  tar_target(
    r_droughtc_l_heatc_u_max_plot,
    r_droughtc_l_heatc_u_max_plot_f(
      r_droughtc_l_heatc_u_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_droughtc_u_heatc_l_max_plot,
    r_droughtc_u_heatc_l_max_plot_f(
       r_droughtc_u_heatc_l_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_droughtc_l_floodc_u_max_plot,
    r_droughtc_l_floodc_u_max_plot_f(
      r_droughtc_l_floodc_u_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_droughtc_u_floodc_l_max_plot,
    r_droughtc_u_floodc_l_max_plot_f(
      r_droughtc_u_floodc_l_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_heatc_l_floodc_u_max_plot,
    r_heatc_l_floodc_u_max_plot_f(
      r_heatc_l_floodc_u_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_heatc_u_floodc_l_max_plot,
    r_heatc_u_floodc_l_max_plot_f(
      r_heatc_u_floodc_l_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_droughtc_l_heatc_l_floodc_u_max_plot,
    r_droughtc_l_heatc_l_floodc_u_max_plot_f(
      r_droughtc_l_heatc_l_floodc_u_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_droughtc_l_heatc_u_floodc_l_max_plot,
    r_droughtc_l_heatc_u_floodc_l_max_plot_f(
      r_droughtc_l_heatc_u_floodc_l_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_droughtc_u_heatc_l_floodc_l_max_plot,
    r_droughtc_u_heatc_l_floodc_l_max_plot_f(
      r_droughtc_u_heatc_l_floodc_l_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_droughtc_l_heatc_u_floodc_u_max_plot,
    r_droughtc_l_heatc_u_floodc_u_max_plot_f(
      r_droughtc_l_heatc_u_floodc_u_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_droughtc_u_heatc_l_floodc_u_max_plot,
    r_droughtc_u_heatc_l_floodc_u_max_plot_f(
      r_droughtc_u_heatc_l_floodc_u_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_droughtc_u_heatc_u_floodc_l_max_plot,
    r_droughtc_u_heatc_u_floodc_l_max_plot_f(
      r_droughtc_u_heatc_u_floodc_l_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  )
)
```

#### Future Lower threshold

```{targets impact_data_plot_4}

list(
  tar_target(
    r_droughtf_l_heatf_l_max_plot,
    r_droughtf_l_heatf_l_max_plot_f(
      r_droughtf_l_heatf_l_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_droughtf_l_floodf_l_max_plot,
    r_droughtf_l_floodf_l_max_plot_f(
      r_droughtf_l_floodf_l_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_heatf_l_floodf_l_max_plot,
    r_heatf_l_floodf_l_max_plot_f(
      r_heatf_l_floodf_l_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_droughtf_l_heatf_l_floodf_l_max_plot,
    r_droughtf_l_heatf_l_floodf_l_max_plot_f(
      r_droughtf_l_heatf_l_floodf_l_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  )
)

```

#### Future Upper threshold

```{targets impact_data_plot_5}

list(
  tar_target(
    r_droughtf_u_heatf_u_max_plot,
    r_droughtf_u_heatf_u_max_plot_f(
      r_droughtf_u_heatf_u_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_droughtf_u_floodf_u_max_plot,
    r_droughtf_u_floodf_u_max_plot_f(
      r_droughtf_u_floodf_u_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_heatf_u_floodf_u_max_plot,
    r_heatf_u_floodf_u_max_plot_f(
      r_heatf_u_floodf_u_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_droughtf_u_heatf_u_floodf_u_max_plot,
    r_droughtf_u_heatf_u_floodf_u_max_plot_f(
      r_droughtf_u_heatf_u_floodf_u_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  )
)

```
#### Future Mixed threshold

```{targets impact_data_plot_6}

list(
  tar_target(
    r_droughtf_l_heatf_u_max_plot,
    r_droughtf_l_heatf_u_max_plot_f(
      r_droughtf_l_heatf_u_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_droughtf_u_heatf_l_max_plot,
    r_droughtf_u_heatf_l_max_plot_f(
      r_droughtf_u_heatf_l_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_droughtf_l_floodf_u_max_plot,
    r_droughtf_l_floodf_u_max_plot_f(
      r_droughtf_l_floodf_u_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_droughtf_u_floodf_l_max_plot,
    r_droughtf_u_floodf_l_max_plot_f(
      r_droughtf_u_floodf_l_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_heatf_l_floodf_u_max_plot,
    r_heatf_l_floodf_u_max_plot_f(
      r_heatf_l_floodf_u_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_heatf_u_floodf_l_max_plot,
    r_heatf_u_floodf_l_max_plot_f(
      r_heatf_u_floodf_l_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_droughtf_l_heatf_l_floodf_u_max_plot,
    r_droughtf_l_heatf_l_floodf_u_max_plot_f(
      r_droughtf_l_heatf_l_floodf_u_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_droughtf_l_heatf_u_floodf_l_max_plot,
    r_droughtf_l_heatf_u_floodf_l_max_plot_f(
      r_droughtf_l_heatf_u_floodf_l_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_droughtf_u_heatf_l_floodf_l_max_plot,
    r_droughtf_u_heatf_l_floodf_l_max_plot_f(
      r_droughtf_u_heatf_l_floodf_l_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_droughtf_l_heatf_u_floodf_u_max_plot,
    r_droughtf_l_heatf_u_floodf_u_max_plot_f(
      r_droughtf_l_heatf_u_floodf_u_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_droughtf_u_heatf_l_floodf_u_max_plot,
    r_droughtf_u_heatf_l_floodf_u_max_plot_f(
      r_droughtf_u_heatf_l_floodf_u_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  ),
  tar_target(
    r_droughtf_u_heatf_u_floodf_l_max_plot,
    r_droughtf_u_heatf_u_floodf_l_max_plot_f(
      r_droughtf_u_heatf_u_floodf_l_max,
      v_ISO1,
      v_crop_ISO_lc_rcl_agg,
      v_ISO_extent,
      world,
      ISO,
      crop,
      flood
    )
  )
)
```


## Impact Zonal Statistics

### Drought Calculation

```{targets impact_zonal_drought}

list(
  tar_target(
    dB_droughtc_l_summary,
    dB_droughtc_l_summary_make_f(rB_impact, v_crop_ISO_lc_rcl_agg)
  ),
  tar_target(
    dB_droughtf_l_summary,
    dB_droughtf_l_summary_make_f(rB_impact, v_crop_ISO_lc_rcl_agg)
  ),
  tar_target(
    dB_drought_change_l_summary,
    dB_drought_change_l_summary_make_f(rB_impact, v_crop_ISO_lc_rcl_agg)
  ),
    tar_target(
    dB_droughtc_u_summary,
    dB_droughtc_u_summary_make_f(rB_impact, v_crop_ISO_lc_rcl_agg)
  ),
  tar_target(
    dB_droughtf_u_summary,
    dB_droughtf_u_summary_make_f(rB_impact, v_crop_ISO_lc_rcl_agg)
  ),
  tar_target(
    dB_drought_change_u_summary,
    dB_drought_change_u_summary_make_f(rB_impact, v_crop_ISO_lc_rcl_agg)
  )
  
)

```

### Drought Plots

```{targets impact_zonal_drought_plots}

list(
  tar_target(
    dB_droughtc_l_summary_plot,
    dB_droughtc_l_summary_plot_f(dB_droughtc_l_summary, drought, ISO, crop)
  ),
  tar_target(
    dB_droughtf_l_summary_plot,
    dB_droughtf_l_summary_plot_f(dB_droughtf_l_summary, drought, ISO, crop)
  ),
  tar_target(
    dB_drought_change_l_summary_plot,
    dB_drought_change_l_summary_plot_f(dB_drought_change_l_summary, drought, ISO, crop)
  ),
    tar_target(
    dB_droughtc_u_summary_plot,
    dB_droughtc_u_summary_plot_f(dB_droughtc_u_summary, drought, ISO, crop)
  ),
  tar_target(
    dB_droughtf_u_summary_plot,
    dB_droughtf_u_summary_plot_f(dB_droughtf_u_summary, drought, ISO, crop)
  ),
  tar_target(
    dB_drought_change_u_summary_plot,
    dB_drought_change_u_summary_plot_f(dB_drought_change_u_summary, drought, ISO, crop)
  )
)

```

### Heat Calculation

```{targets impact_zonal_heat}

list(
  tar_target(
    dB_heatc_l_summary_values,
    dB_heatc_l_summary_values_make_f(rB_impact, v_crop_ISO_lc_rcl_agg)
  ),  
  tar_target(
    dB_heatc_l_summary,
    dB_heatc_l_summary_make_f(rB_impact, v_crop_ISO_lc_rcl_agg)
  ),
  tar_target(
    dB_heatf_l_summary,
    dB_heatf_l_summary_make_f(rB_impact, v_crop_ISO_lc_rcl_agg)
  ),
  tar_target(
    dB_heat_change_l_summary,
    dB_heat_change_l_summary_make_f(rB_impact, v_crop_ISO_lc_rcl_agg)
  ),
    tar_target(
    dB_heatc_u_summary,
    dB_heatc_u_summary_make_f(rB_impact, v_crop_ISO_lc_rcl_agg)
  ),
  tar_target(
    dB_heatf_u_summary,
    dB_heatf_u_summary_make_f(rB_impact, v_crop_ISO_lc_rcl_agg)
  ),
  tar_target(
    dB_heat_change_u_summary,
    dB_heat_change_u_summary_make_f(rB_impact, v_crop_ISO_lc_rcl_agg)
  )
  
)

```

### Heat Plots

```{targets impact_zonal_heat_plots}

list(
  tar_target(
    dB_heatc_l_summary_plot,
    dB_heatc_l_summary_plot_f(dB_heatc_l_summary, heat, ISO, crop)
  ),
  tar_target(
    dB_heatf_l_summary_plot,
    dB_heatf_l_summary_plot_f(dB_heatf_l_summary, heat, ISO, crop)
  ),
  tar_target(
    dB_heat_change_l_summary_plot,
    dB_heat_change_l_summary_plot_f(dB_heat_change_l_summary, heat, ISO, crop)
  ),
    tar_target(
    dB_heatc_u_summary_plot,
    dB_heatc_u_summary_plot_f(dB_heatc_u_summary, heat, ISO, crop)
  ),
  tar_target(
    dB_heatf_u_summary_plot,
    dB_heatf_u_summary_plot_f(dB_heatf_u_summary, heat, ISO, crop)
  ),
  tar_target(
    dB_heat_change_u_summary_plot,
    dB_heat_change_u_summary_plot_f(dB_heat_change_u_summary, heat, ISO, crop)
  )
)

```

### Flood Calculation

```{targets impact_zonal_flood}

list(
  tar_target(
    dB_floodc_l_summary,
    dB_floodc_l_summary_make_f(rB_impact, v_crop_ISO_lc_rcl_agg)
  ),
  tar_target(
    dB_floodf_l_summary,
    dB_floodf_l_summary_make_f(rB_impact, v_crop_ISO_lc_rcl_agg)
  ),
  tar_target(
    dB_flood_change_l_summary,
    dB_flood_change_l_summary_make_f(rB_impact, v_crop_ISO_lc_rcl_agg)
  ),
    tar_target(
    dB_floodc_u_summary,
    dB_floodc_u_summary_make_f(rB_impact, v_crop_ISO_lc_rcl_agg)
  ),
  tar_target(
    dB_floodf_u_summary,
    dB_floodf_u_summary_make_f(rB_impact, v_crop_ISO_lc_rcl_agg)
  ),
  tar_target(
    dB_flood_change_u_summary,
    dB_flood_change_u_summary_make_f(rB_impact, v_crop_ISO_lc_rcl_agg)
  )
  
)

```

### Flood Plots

```{targets impact_zonal_flood_plots}

list(
  tar_target(
    dB_floodc_l_summary_plot,
    dB_floodc_l_summary_plot_f(dB_floodc_l_summary, flood, ISO, crop)
  ),
  tar_target(
    dB_floodf_l_summary_plot,
    dB_floodf_l_summary_plot_f(dB_floodf_l_summary, flood, ISO, crop)
  ),
  tar_target(
    dB_flood_change_l_summary_plot,
    dB_flood_change_l_summary_plot_f(dB_flood_change_l_summary, flood, ISO, crop)
  ),
    tar_target(
    dB_floodc_u_summary_plot,
    dB_floodc_u_summary_plot_f(dB_floodc_u_summary, flood, ISO, crop)
  ),
  tar_target(
    dB_floodf_u_summary_plot,
    dB_floodf_u_summary_plot_f(dB_floodf_u_summary, flood, ISO, crop)
  ),
  tar_target(
    dB_flood_change_u_summary_plot,
    dB_flood_change_u_summary_plot_f(dB_flood_change_u_summary, flood, ISO, crop)
  )
)

```

## Climate Risk Profiles

### Prepare Climate Risk Profile Data

```{targets climate_risk_profile_data_prep}

list(
  tar_target(
    dB_profile_summary,
    dB_profile_summary_make_f(rB_impact, v_crop_ISO_lc_rcl_agg)
  ),
  tar_target(
    dB_profile_summary_file,
    dB_profile_summary_file_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  )
)


```

### Plot Climate Risk Profile Data

#### Past - Lower thresholds 

```{targets climate_risk_profile_data_plots_c_l}

list(
  tar_target(
    dB_profilec_d_l_h_l_plot,
    dB_profilec_d_l_h_l_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
  tar_target(
    dB_profilec_d_l_f_l_plot,
    dB_profilec_d_l_f_l_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
  tar_target(
    dB_profilec_h_l_f_l_plot,
    dB_profilec_h_l_f_l_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
    tar_target(
    dB_profilec_d_l_h_l_f_l_plot,
    dB_profilec_d_l_h_l_f_l_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  )
)
```  

#### Past - Upper thresholds 

```{targets climate_risk_profile_data_plots_c_u} 

list(
    tar_target(
    dB_profilec_d_u_h_u_plot,
    dB_profilec_d_u_h_u_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
  tar_target(
    dB_profilec_d_u_f_u_plot,
    dB_profilec_d_u_f_u_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
  tar_target(
    dB_profilec_h_u_f_u_plot,
    dB_profilec_h_u_f_u_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
    tar_target(
    dB_profilec_d_u_h_u_f_u_plot,
    dB_profilec_d_u_h_u_f_u_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  )
)

```

#### Past - Mixed thresholds 

```{targets climate_risk_profile_data_plots_c_m} 

list(
    tar_target(
    dB_profilec_d_u_h_l_plot,
    dB_profilec_d_u_h_l_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
  tar_target(
    dB_profilec_d_l_h_u_plot,
    dB_profilec_d_l_h_u_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
  tar_target(
    dB_profilec_d_u_f_l_plot,
    dB_profilec_d_u_f_l_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
  tar_target(
    dB_profilec_d_l_f_u_plot,
    dB_profilec_d_l_f_u_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
  tar_target(
    dB_profilec_h_u_f_l_plot,
    dB_profilec_h_u_f_l_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
  tar_target(
    dB_profilec_h_l_f_u_plot,
    dB_profilec_h_l_f_u_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
    tar_target(
    dB_profilec_d_u_h_l_f_l_plot,
    dB_profilec_d_u_h_l_f_l_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
  tar_target(
    dB_profilec_d_l_h_u_f_l_plot,
    dB_profilec_d_l_h_u_f_l_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
  tar_target(
    dB_profilec_d_l_h_l_f_u_plot,
    dB_profilec_d_l_h_l_f_u_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
  tar_target(
    dB_profilec_d_u_h_u_f_l_plot,
    dB_profilec_d_u_h_u_f_l_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
  tar_target(
    dB_profilec_d_u_h_l_f_u_plot,
    dB_profilec_d_u_h_l_f_u_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
  tar_target(
    dB_profilec_d_l_h_u_f_u_plot,
    dB_profilec_d_l_h_u_f_u_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  )
)

```

#### Future - Lower thresholds 

```{targets climate_risk_profile_data_plots_f_l}

list(
  tar_target(
    dB_profilef_d_l_h_l_plot,
    dB_profilef_d_l_h_l_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
  tar_target(
    dB_profilef_d_l_f_l_plot,
    dB_profilef_d_l_f_l_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
  tar_target(
    dB_profilef_h_l_f_l_plot,
    dB_profilef_h_l_f_l_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
    tar_target(
    dB_profilef_d_l_h_l_f_l_plot,
    dB_profilef_d_l_h_l_f_l_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  )
)
```  

#### Future - Upper thresholds 

```{targets climate_risk_profile_data_plots_f_u} 

list(
    tar_target(
    dB_profilef_d_u_h_u_plot,
    dB_profilef_d_u_h_u_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
  tar_target(
    dB_profilef_d_u_f_u_plot,
    dB_profilef_d_u_f_u_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
  tar_target(
    dB_profilef_h_u_f_u_plot,
    dB_profilef_h_u_f_u_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
    tar_target(
    dB_profilef_d_u_h_u_f_u_plot,
    dB_profilef_d_u_h_u_f_u_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  )
)

```

#### Future - Mixed thresholds 

```{targets climate_risk_profile_data_plots_f_m} 

list(
    tar_target(
    dB_profilef_d_u_h_l_plot,
    dB_profilef_d_u_h_l_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
  tar_target(
    dB_profilef_d_l_h_u_plot,
    dB_profilef_d_l_h_u_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
  tar_target(
    dB_profilef_d_u_f_l_plot,
    dB_profilef_d_u_f_l_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
  tar_target(
    dB_profilef_d_l_f_u_plot,
    dB_profilef_d_l_f_u_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
  tar_target(
    dB_profilef_h_u_f_l_plot,
    dB_profilef_h_u_f_l_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
  tar_target(
    dB_profilef_h_l_f_u_plot,
    dB_profilef_h_l_f_u_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
    tar_target(
    dB_profilef_d_u_h_l_f_l_plot,
    dB_profilef_d_u_h_l_f_l_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
  tar_target(
    dB_profilef_d_l_h_u_f_l_plot,
    dB_profilef_d_l_h_u_f_l_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
  tar_target(
    dB_profilef_d_l_h_l_f_u_plot,
    dB_profilef_d_l_h_l_f_u_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
  tar_target(
    dB_profilef_d_u_h_u_f_l_plot,
    dB_profilef_d_u_h_u_f_l_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
  tar_target(
    dB_profilef_d_u_h_l_f_u_plot,
    dB_profilef_d_u_h_l_f_u_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  ),
  tar_target(
    dB_profilef_d_l_h_u_f_u_plot,
    dB_profilef_d_l_h_u_f_u_plot_make_f(v_crop_ISO_lc_rcl_agg, dB_profile_summary, ISO, crop)
  )
)

```




# Pipeline

## Run pipeline

If you ran all the `{targets}` chunks in non-interactive mode, then your R scripts are set up to run the pipeline.

```{r}
tar_make()
```

## View pipeline

The `targets` dependency graph helps your readers understand the steps of your pipeline at a high level.

```{r, message = FALSE, fig.width = 15, fig.height = 6}
tar_glimpse()
```

# Output


## Parameters

```{r, message = FALSE, results = 'show'}

tar_read(ISO)
tar_read(crop)
tar_read(drought)
tar_read(heat)
tar_read(flood)
tar_read(drought_threshold_l)
tar_read(drought_threshold_l_width)
tar_read(drought_threshold_u)
tar_read(drought_threshold_u_width)
tar_read(heat_threshold_l)
tar_read(heat_threshold_l_width)
tar_read(heat_threshold_u)
tar_read(heat_threshold_u_width)
tar_read(flood_threshold_l)
tar_read(flood_threshold_l_width)
tar_read(flood_threshold_u)
tar_read(flood_threshold_u_width)

```

## Country Spatial Data

### GADM Country boundary polygons

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(v_ISO_plot)

```

### Crop area polygons

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(v_crop_plot)

```

## Land Cover Map in an African context

```{r, message = FALSE, fig.width = 8, fig.height = 6}
tar_read(r_lc_plot)
```

### Land cover clipped to country boundary

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_lc_ISO_plot)

```

### Crop area converted to raster and clipped to country boundary

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_crop_ISO_plot)

```

### Crop area raster combined with Land cover

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_crop_ISO_lc_plot)

```

### Crop area and Land cover raster reclassified

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_crop_ISO_lc_rcl_plot)

```

### Reclassified crop area and Land cover raster aggregated

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(v_crop_ISO_lc_rcl_agg_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_crop_ISO_lc_rcl_agg_proj_plot)

```

## Climate Base Data

### Rainfall

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_rainfallc_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_rainfallf_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_rainfall_change_plot)

```

### Temperature

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_tempc_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_tempf_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_temp_change_plot)

```

### Season Onset

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_onsetc_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_onsetf_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_onset_change_plot)

```

### Season Duration

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_durationc_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_durationf_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_duration_change_plot)

```

## Climate Hazard Indicators

### Drought

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtc_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtf_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_drought_change_plot)

```

### Heat Stress

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_heatc_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_heatf_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_heat_change_plot)

```

### Waterlogging

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_floodc_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_floodf_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_flood_change_plot)


```


## Zonal Statistics of Climate Data

### Rainfall

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_rainfallc_summary_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_rainfallf_summary_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_rainfall_change_summary_plot)

```

### Temperature

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_tempc_summary_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_tempf_summary_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_temp_change_summary_plot)

```

### Season Onset

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_onsetc_summary_plot )

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_onsetf_summary_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_onset_change_summary_plot)

```

### Season Duration

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_durationc_summary_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_durationf_summary_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_duration_change_summary_plot)

```


## Zonal Statistics of Climate Indicators

### Drought

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_droughtc_summary_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_droughtf_summary_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_drought_change_summary_plot)

```

### Heat Stress

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_heatc_summary_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_heatf_summary_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_heat_change_summary_plot)

```

### Waterlogging

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_floodc_summary_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_floodf_summary_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_flood_change_summary_plot)

```

## Zonal Statistics of Impact of Climate Indicators

### Drought

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_droughtc_l_summary_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_droughtf_l_summary_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_drought_change_l_summary_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_droughtc_u_summary_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_droughtf_u_summary_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_drought_change_u_summary_plot)

```

### Heat Stress

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_heatc_l_summary)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_heatc_l_summary_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_heatf_l_summary_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_heat_change_l_summary_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_heatc_u_summary_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_heatf_u_summary_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_heat_change_u_summary_plot)

```

### Waterlogging

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_floodc_l_summary_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_floodf_l_summary_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_flood_change_l_summary_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_floodc_u_summary_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_floodf_u_summary_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_flood_change_u_summary_plot)

```


## Climate Risk Profiles

### Past - Lower thresholds 

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_profilec_d_l_h_l_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtc_l_heatc_l_max_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_profilec_d_l_f_l_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtc_l_floodc_l_max_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_profilec_h_l_f_l_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_heatc_l_floodc_l_max_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}


tar_read(dB_profilec_d_l_h_l_f_l_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtc_l_heatc_l_floodc_l_max_plot)

```

### Past - Upper thresholds 

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_profilec_d_u_h_u_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtc_u_heatc_u_max_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_profilec_d_u_f_u_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtc_u_floodc_u_max_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_profilec_h_u_f_u_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_heatc_u_floodc_u_max_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_profilec_d_u_h_u_f_u_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtc_u_heatc_u_floodc_u_max_plot)

```


### Past - Mixed thresholds 


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_profilec_d_u_h_l_plot)
```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtc_u_heatc_l_max_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}
tar_read(dB_profilec_d_l_h_u_plot)
```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtc_l_heatc_u_max_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}
tar_read(dB_profilec_d_u_f_l_plot)
```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtc_u_floodc_l_max_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}
tar_read(dB_profilec_d_l_f_u_plot)
```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtc_l_floodc_u_max_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}
tar_read(dB_profilec_h_u_f_l_plot)
```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_heatc_u_floodc_l_max_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}
tar_read(dB_profilec_h_l_f_u_plot)
```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_heatc_l_floodc_u_max_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}
tar_read(dB_profilec_d_u_h_l_f_l_plot)
```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtc_u_heatc_l_floodc_l_max_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}
tar_read(dB_profilec_d_l_h_u_f_l_plot)
```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtc_l_heatc_u_floodc_l_max_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}
tar_read(dB_profilec_d_l_h_l_f_u_plot)
```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtc_l_heatc_l_floodc_u_max_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}
tar_read(dB_profilec_d_u_h_u_f_l_plot)
```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtc_u_heatc_u_floodc_l_max_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}
tar_read(dB_profilec_d_u_h_l_f_u_plot)
```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtc_u_heatc_l_floodc_u_max_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}
tar_read(dB_profilec_d_l_h_u_f_u_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtc_l_heatc_u_floodc_u_max_plot)

```

### Future - Lower thresholds 

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_profilef_d_l_h_l_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtf_l_heatf_l_max_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_profilef_d_l_f_l_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtf_l_floodf_l_max_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_profilef_h_l_f_l_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_heatf_l_floodf_l_max_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}


tar_read(dB_profilef_d_l_h_l_f_l_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtf_l_heatf_l_floodf_l_max_plot)

```

### Future - Upper thresholds 

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_profilef_d_u_h_u_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtf_u_heatf_u_max_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_profilef_d_u_f_u_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtf_u_floodf_u_max_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_profilef_h_u_f_u_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_heatf_u_floodf_u_max_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_profilef_d_u_h_u_f_u_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtf_u_heatf_u_floodf_u_max_plot)

```


### Future - Mixed thresholds 


```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(dB_profilef_d_u_h_l_plot)
```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtf_u_heatf_l_max_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}
tar_read(dB_profilef_d_l_h_u_plot)
```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtf_l_heatf_u_max_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}
tar_read(dB_profilef_d_u_f_l_plot)
```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtf_u_floodf_l_max_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}
tar_read(dB_profilef_d_l_f_u_plot)
```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtf_l_floodf_u_max_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}
tar_read(dB_profilef_h_u_f_l_plot)
```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_heatf_u_floodf_l_max_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}
tar_read(dB_profilef_h_l_f_u_plot)
```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_heatf_l_floodf_u_max_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}
tar_read(dB_profilef_d_u_h_l_f_l_plot)
```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtf_u_heatf_l_floodf_l_max_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}
tar_read(dB_profilef_d_l_h_u_f_l_plot)
```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtf_l_heatf_u_floodf_l_max_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}
tar_read(dB_profilef_d_l_h_l_f_u_plot)
```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtf_l_heatf_l_floodf_u_max_plot)

```


```{r, message = FALSE, fig.width = 8, fig.height = 6}
tar_read(dB_profilef_d_u_h_u_f_l_plot)
```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtf_u_heatf_u_floodf_l_max_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}
tar_read(dB_profilef_d_u_h_l_f_u_plot)
```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtf_u_heatf_l_floodf_u_max_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}
tar_read(dB_profilef_d_l_h_u_f_u_plot)

```

```{r, message = FALSE, fig.width = 8, fig.height = 6}

tar_read(r_droughtf_l_heatf_u_floodf_u_max_plot)

```


